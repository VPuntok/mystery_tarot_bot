#!/usr/bin/env python
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ä–∞—Å–∫–ª–∞–¥–æ–≤
"""
import os
import sys
import django

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'core.settings')
django.setup()

from projects.models import Project
from tarot.models import TarotSpread

def add_spreads():
    """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–∞—Å–∫–ª–∞–¥–æ–≤"""
    print("–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–∞—Å–∫–ª–∞–¥–æ–≤...")
    
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
    try:
        project = Project.objects.get(name="Mystic Tarot Bot")
    except Project.DoesNotExist:
        print("‚ùå –ü—Ä–æ–µ–∫—Ç 'Mystic Tarot Bot' –Ω–µ –Ω–∞–π–¥–µ–Ω!")
        return
    
    # –ù–æ–≤—ã–µ —Ä–∞—Å–∫–ª–∞–¥—ã
    new_spreads = [
        {
            "name": "–†–∞—Å–∫–ª–∞–¥ –ª—é–±–≤–∏",
            "description": "–ì–∞–¥–∞–Ω–∏–µ –Ω–∞ –ª—é–±–æ–≤—å –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è. 7 –∫–∞—Ä—Ç —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç –ø—Ä–æ—à–ª–æ–µ, –Ω–∞—Å—Ç–æ—è—â–µ–µ –∏ –±—É–¥—É—â–µ–µ –≤–∞—à–∏—Ö —á—É–≤—Å—Ç–≤.",
            "num_cards": 7
        },
        {
            "name": "–†–∞—Å–∫–ª–∞–¥ –∫–∞—Ä—å–µ—Ä—ã",
            "description": "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≥–∞–¥–∞–Ω–∏–µ. 5 –∫–∞—Ä—Ç –ø–æ–∫–∞–∂—É—Ç –≤–∞—à –∫–∞—Ä—å–µ—Ä–Ω—ã–π –ø—É—Ç—å –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–æ—Å—Ç–∞.",
            "num_cards": 5
        },
        {
            "name": "–†–∞—Å–∫–ª–∞–¥ –∑–¥–æ—Ä–æ–≤—å—è",
            "description": "–ì–∞–¥–∞–Ω–∏–µ –Ω–∞ –∑–¥–æ—Ä–æ–≤—å–µ –∏ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏–µ. 4 –∫–∞—Ä—Ç—ã —Ä–∞—Å–∫—Ä–æ—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∞—à–µ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è.",
            "num_cards": 4
        },
        {
            "name": "–†–∞—Å–∫–ª–∞–¥ –¥–µ–Ω–µ–≥",
            "description": "–§–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –≥–∞–¥–∞–Ω–∏–µ. 6 –∫–∞—Ä—Ç –ø–æ–∫–∞–∂—É—Ç –≤–∞—à–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –±—É–¥—É—â–µ–µ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.",
            "num_cards": 6
        },
        {
            "name": "–†–∞—Å–∫–ª–∞–¥ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π",
            "description": "–ì–∞–¥–∞–Ω–∏–µ –Ω–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –∏ –ø–æ–µ–∑–¥–∫–∏. 3 –∫–∞—Ä—Ç—ã –ø—Ä–µ–¥—Å–∫–∞–∂—É—Ç –≤–∞—à–∏ –±—É–¥—É—â–∏–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è.",
            "num_cards": 3
        },
        {
            "name": "–†–∞—Å–∫–ª–∞–¥ —Å–µ–º—å–∏",
            "description": "–°–µ–º–µ–π–Ω–æ–µ –≥–∞–¥–∞–Ω–∏–µ. 8 –∫–∞—Ä—Ç —Ä–∞—Å–∫—Ä–æ—é—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –≤ —Å–µ–º—å–µ –∏ —Å–µ–º–µ–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è.",
            "num_cards": 8
        },
        {
            "name": "–†–∞—Å–∫–ª–∞–¥ –¥—Ä—É–∂–±—ã",
            "description": "–ì–∞–¥–∞–Ω–∏–µ –Ω–∞ –¥—Ä—É–∂–±—É –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏. 4 –∫–∞—Ä—Ç—ã –ø–æ–∫–∞–∂—É—Ç –≤–∞—à–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –¥—Ä—É–∑—å—è–º–∏.",
            "num_cards": 4
        },
        {
            "name": "–†–∞—Å–∫–ª–∞–¥ –¥—É—Ö–æ–≤–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞",
            "description": "–ì–∞–¥–∞–Ω–∏–µ –Ω–∞ –¥—É—Ö–æ–≤–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ. 9 –∫–∞—Ä—Ç –ø–æ–∫–∞–∂—É—Ç –≤–∞—à –¥—É—Ö–æ–≤–Ω—ã–π –ø—É—Ç—å –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–æ—Å—Ç–∞.",
            "num_cards": 9
        },
        {
            "name": "–†–∞—Å–∫–ª–∞–¥ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π",
            "description": "–ì–∞–¥–∞–Ω–∏–µ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è –≤–∞–∂–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π. 5 –∫–∞—Ä—Ç –ø–æ–º–æ–≥—É—Ç –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å.",
            "num_cards": 5
        },
        {
            "name": "–†–∞—Å–∫–ª–∞–¥ –ø—Ä–æ—à–ª—ã—Ö –∂–∏–∑–Ω–µ–π",
            "description": "–ö–∞—Ä–º–∏—á–µ—Å–∫–æ–µ –≥–∞–¥–∞–Ω–∏–µ. 6 –∫–∞—Ä—Ç —Ä–∞—Å–∫—Ä–æ—é—Ç —Ç–∞–π–Ω—ã –≤–∞—à–∏—Ö –ø—Ä–æ—à–ª—ã—Ö –≤–æ–ø–ª–æ—â–µ–Ω–∏–π.",
            "num_cards": 6
        }
    ]
    
    created_count = 0
    for spread_data in new_spreads:
        spread, created = TarotSpread.objects.get_or_create(
            name=spread_data["name"],
            project=project,
            defaults={
                'description': spread_data["description"],
                'num_cards': spread_data["num_cards"]
            }
        )
        
        if created:
            print(f"‚úÖ –°–æ–∑–¥–∞–Ω —Ä–∞—Å–∫–ª–∞–¥: {spread.name} ({spread.num_cards} –∫–∞—Ä—Ç)")
            created_count += 1
        else:
            print(f"‚è≠Ô∏è  –†–∞—Å–∫–ª–∞–¥ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {spread.name}")
    
    print(f"\nüéØ –ò—Ç–æ–≥–æ —Å–æ–∑–¥–∞–Ω–æ –Ω–æ–≤—ã—Ö —Ä–∞—Å–∫–ª–∞–¥–æ–≤: {created_count}")
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—Å–∫–ª–∞–¥–æ–≤
    total_spreads = TarotSpread.objects.filter(project=project).count()
    print(f"üìä –í—Å–µ–≥–æ —Ä–∞—Å–∫–ª–∞–¥–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ: {total_spreads}")

if __name__ == '__main__':
    add_spreads() 